<!DOCTYPE html>  
<html lang="en">  
<head>  
    <link rel="manifest" href="./manifest.json">
    <link rel="stylesheet" href="styles.css">  
    <meta name="theme-color" content="#8b7cc8">  
    <link rel="apple-touch-icon" href="./icons/icon-192.png">  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">  
<link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@300;400;700&display=swap" rel="stylesheet">  
<link href="https://fonts.googleapis.com/css2?family=Cedarville+Cursive&display=swap" rel="stylesheet">  
<link href="https://fonts.googleapis.com/css2?family=Cabin+Sketch:wght@400;700&display=swap" rel="stylesheet">  

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">  

<title>ATTENZA - for Dispur College</title>  

</head>  

<body>  
<div class="header" id="header">  
    <div class="top-bar">  
        <div class="left-section">  
            <button class="icon-btn" aria-label="Menu">  
                <div class="menu-mini"><span></span></div>  
            </button>  <div class="brand-container">  
            <span class="brand-name">ATTENZA</span>  
            <span class="tagline">a student driven attendance tracker</span>  
        </div>  
    </div>  

    <button class="icon-btn notif-rev" aria-label="Notifications">  
        <svg  
            viewBox="0 0 24 24"  
            fill="none"  
            xmlns="http://www.w3.org/2000/svg"  
            aria-hidden="true"  
        >  
            <path  
                d="M12 5.365V3m0 2.365a5.338 5.338 0 0 1 5.133 5.368v1.8c0 2.386 1.867 2.982 1.867 4.175 0 .593 0 1.292-.538 1.292H5.538C5 18 5 17.301 5 16.708c0-1.193 1.867-1.789 1.867-4.175v-1.8A5.338 5.338 0 0 1 12 5.365ZM8.733 18c.094.852.306 1.54.944 2.112a3.48 3.48 0 0 0 4.646 0c.638-.572 1.236-1.26 1.33-2.112h-6.92Z"  
                stroke-width="2.25"  
                stroke-linejoin="round"  
                stroke-linecap="round"  
                stroke="currentColor"  
            ></path>  
        </svg>  
        <div class="notif-dot"></div>  
    </button>  
</div>  

<div class="expand-section">  
    <div class="expand-arrow" id="expandArrow">  
        <svg viewBox="0 0 24 24" fill="none">  
            <path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round"/>  
        </svg>  
    </div>  

    <div class="expanded-content" id="expandedContent">  
        <div class="content-inner">  
            <div class="info-section">  
                <h3>About ATTENZA</h3>  
                <p>A student-driven attendance tracker designed exclusively for Dispur College students. View your attendance data anytime, anywhere - something our teacher-driven system doesn't allow.</p>  
            </div>  

            <div class="info-section">  
                <h3>Key Features</h3>  
                <div class="features">  
                    <div class="feature-card">  
                        <h4>ðŸ“Š Real-time Data</h4>  
                        <p>Check your attendance percentage instantly</p>  
                    </div>  
                    <div class="feature-card">  
                        <h4>ðŸ“… Subject-wise View</h4>  
                        <p>Track attendance for each subject separately</p>  
                    </div>  
                    <div class="feature-card">  
                        <h4>ðŸ”” Smart Alerts</h4>  
                        <p>Get notified when attendance falls below threshold</p>  
                    </div>  
                    <div class="feature-card">  
                        <h4>ðŸ“± Mobile Friendly</h4>  
                        <p>Access from any device, anytime</p>  
                    </div>  
                </div>  
            </div>  

            <div class="info-section">  
                <h3>How to Use</h3>  
                <p>1. Log in with your college ID<br>  
                    2. View your dashboard with attendance summary<br>  
                    3. Click on any subject to see detailed records<br>  
                    4. Set alerts for attendance warnings</p>  
            </div>  
        </div>  
    </div>  
</div>

</div>  <div class="sketch-line-container">  
    <span class="sketch-line">  
        I  
        <svg class="sketch-heart" viewBox="0 0 120 120">  
            <path d="M60 105  
                     C20 70, 10 40, 30 25  
                     C50 10, 70 20, 60 40  
                     C80 10, 110 25, 90 50  
                     C70 80, 60 95, 60 105 Z"/>  <g stroke="#e63946"  
           stroke-width="4"  
           fill="none"  
           stroke-linecap="round"  
           stroke-linejoin="round"  
           opacity="0.9">  

            <path d="M35 60 Q 55 50 80 55" />  
            <path d="M32 68 Q 55 60 85 64" />  
            <path d="M34 76 Q 55 70 82 75" />  
            <path d="M37 84 Q 58 78 79 82" />  

            <path d="M45 45 Q 60 55 78 68" />  
            <path d="M40 52 Q 55 64 75 78" />  

            <path d="M50 70 Q 55 68 60 72" />  
            <path d="M58 80 Q 63 78 68 82" />  
        </g>  
    </svg>  
    Dispur College  
</span>

</div>  <div class="content-body">  
    <div class="welcome-section">  
        <div class="welcome-content">  
            <div class="welcome-text-content">  
                <h3 id="welcomeTitle">Hello, User!</h3>  
                <p id="welcomeSubtitle">Great progress! Keep maintaining your attendance streak.</p>  <div class="attendance-ring">  
                <svg class="ring-svg" viewBox="0 0 160 160">  
                    <circle class="ring-bg-circle" cx="80" cy="80" r="70"></circle>  
                    <circle class="ring-progress-circle" cx="80" cy="80" r="70" id="progressCircle"></circle>  
                </svg>  
                <div class="ring-center">  
                    <span class="percentage" id="percentageText">75%</span>  
                    <span class="percentage-label">Overall</span>  
                </div>  
            </div>  
        </div>  
    </div>  
</div>  

<div class="notebook-section">  
    <div class="page">  
        <img src="Image/your-logo.png" alt="Logo" class="note-logo">  
        <div class="margin"></div>  

        <p>  
            Keep a quick note of important classes, make-up days or attendance targets here.  
            This space can work like your personal college notebook page.  
        </p>  

        <div class="teacher-mark">  
            <span class="teacher-sign">Principal</span>  
        </div>  
    </div>  
</div>  

<div class="install-strip" id="installStrip">  
    <div class="install-content">  
        <span class="install-text" id="installText">Install this site as an app</span>  
        <button class="close-strip" id="closeStrip">  
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">  
                <line x1="18" y1="6" x2="6" y2="18"></line>  
                <line x1="6" y1="6" x2="18" y2="18"></line>  
            </svg>  
        </button>  
    </div>  
</div>  

<div class="section-header">  
    <h3>Today's Schedule</h3>  
    <a href="#" class="view-all">  
        VIEW  
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">  
            <polyline points="9 18 15 12 9 6"></polyline>  
        </svg>  
    </a>  
</div>  

<div class="carousel-container">  
    <div class="carousel" id="carousel">  
        <div class="class-card">  
            <div class="class-header">  
                <span class="class-subject">Data Structures</span>  
                <span class="class-time">09:00 AM</span>  
            </div>  
            <div class="class-details">  
                <div><strong>Room:</strong> CS-301</div>  
                <div><strong>Faculty:</strong> Dr. Smith</div>  
                <div><strong>Duration:</strong> 1 hour</div>  
            </div>  
            <div class="attendance-actions">  
                <button class="attendance-btn btn-attend">Attend</button>  
                <button class="attendance-btn btn-skip">Skip</button>  
                <button class="attendance-btn btn-not-held">Not Held</button>  
            </div>  
        </div>  

        <div class="class-card">  
            <div class="class-header">  
                <span class="class-subject">Database Systems</span>  
                <span class="class-time">11:00 AM</span>  
            </div>  
            <div class="class-details">  
                <div><strong>Room:</strong> CS-205</div>  
                <div><strong>Faculty:</strong> Prof. Johnson</div>  
                <div><strong>Duration:</strong> 1.5 hours</div>  
            </div>  
            <div class="attendance-actions">  
                <button class="attendance-btn btn-attend">Attend</button>  
                <button class="attendance-btn btn-skip">Skip</button>  
                <button class="attendance-btn btn-not-held">Not Held</button>  
            </div>  
        </div>  

        <div class="class-card">  
            <div class="class-header">  
                <span class="class-subject">Web Development</span>  
                <span class="class-time">02:00 PM</span>  
            </div>  
            <div class="class-details">  
                <div><strong>Room:</strong> Lab-102</div>  
                <div><strong>Faculty:</strong> Ms. Williams</div>  
                <div><strong>Duration:</strong> 2 hours</div>  
            </div>  
            <div class="attendance-actions">  
                <button class="attendance-btn btn-attend">Attend</button>  
                <button class="attendance-btn btn-skip">Skip</button>  
                <button class="attendance-btn btn-not-held">Not Held</button>  
            </div>  
        </div>  

        <div class="class-card">  
            <div class="class-header">  
                <span class="class-subject">Computer Networks</span>  
                <span class="class-time">04:00 PM</span>  
            </div>  
            <div class="class-details">  
                <div><strong>Room:</strong> CS-102</div>  
                <div><strong>Faculty:</strong> Dr. Anderson</div>  
                <div><strong>Duration:</strong> 1 hour</div>  
            </div>  
            <div class="attendance-actions">  
                <button class="attendance-btn btn-attend">Attend</button>  
                <button class="attendance-btn btn-skip">Skip</button>  
                <button class="attendance-btn btn-not-held">Not Held</button>  
            </div>  
        </div>  
    </div>  
</div>  

<section class="periodical-section">  
    <header class="periodical-header">  
        <h2>Periodical records</h2>  
    </header>  

    <div class="date-picker-container">  
        <div class="custom-flatpickr">  
            <input  
                type="text"  
                placeholder="Select date range..."  
                data-input  
                id="rangePicker"  
            />  
            <div class="date-display" id="dateDisplay">  
                <span class="date-part empty" id="startDate">Select date</span>  
                <span class="date-separator">to</span>  
                <span class="date-part empty" id="endDate">Select date</span>  
            </div>  
            <span class="calendar-icon" aria-hidden="true">  
                <svg viewBox="0 0 24 24" fill="none" stroke="#323544" stroke-width="2"  
                      stroke-linecap="round" stroke-linejoin="round">  
                    <rect x="3" y="4" width="18" height="18" rx="3" ry="3"></rect>  
                    <line x1="3" y1="10" x2="21" y2="10"></line>  
                    <line x1="8" y1="2" x2="8" y2="6"></line>  
                    <line x1="16" y1="2" x2="16" y2="6"></line>  
                </svg>  
            </span>  
        </div>  
        <p class="date-picker-helper">for selected period</p>  
    </div>  

    <section class="bento-grid">  

        <article class="card metric-card span-2">  
            <div class="card-title">Overall attendance</div>  
            <div class="metric-icon" aria-hidden="true">  
                <svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#323544" viewBox="0 0 24 24">  
                    <path d="M13.5 2c-.178 0-.356.013-.492.022l-.074.005a1 1 0 0 0-.934.998V11a1 1 0 0 0 1 1h7.975a1 1 0 0 0 .998-.934l.005-.074A7.04 7.04 0 0 0 22 10.5A8.5 8.5 0 0 0 13.5 2Z"/>  
                    <path d="M11 6.025a1 1 0 0 0-1.065-.998 8.5 8.5 0 1 0 9.038 9.039A1 1 0 0 0 17.975 13H11V6.025Z"/>  
                </svg>  
            </div>  
            <div class="card-body">  
                <div class="circle-shell">  
                    <svg viewBox="0 0 140 140">  
                        <circle class="circle-outer-ring" cx="70" cy="70" r="60" />  
                        <circle class="circle-inner-value" cx="70" cy="70" r="48" />  
                    </svg>  
                    <div class="circle-center"><span>75%</span></div>  
                </div>  
                <div class="card-footer">All subjects combined</div>  
            </div>  
        </article>  

        <article class="card metric-card span-2" id="majorCard">  
            <div class="card-title">Major subs overall</div>  
            <div class="metric-icon" aria-hidden="true">  
                <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">  
                    <path d="M3.5 5.75C3.5 5.33579 3.16421 5 2.75 5C2.33579 5 2 5.33579 2 5.75V17.75C2 18.9926 3.00736 20 4.25 20H21.25C21.6642 20 22 19.6642 22 19.25C22 18.8358 21.6642 18.5 21.25 18.5H4.25C3.83579 18.5 3.5 18.1642 3.5 17.75V5.75Z" fill="#323544"/>  
                    <path d="M7 10.7773C5.89543 10.7773 5 11.6728 5 12.7773V16.2501C5 16.6643 5.33579 17.0001 5.75 17.0001H8.25C8.66421 17.0001 9 16.6643 9 16.2501V12.7773C9 11.6728 8.10457 10.7773 7 10.7773Z" fill="#323544"/>  
                    <path d="M12.5 5C11.3954 5 10.5 5.89543 10.5 7V16.2501C10.5 16.6643 10.8358 17.0001 11.25 17.0001H13.75C14.1642 17.0001 14.5 16.6643 14.5 16.2501V7C14.5 5.89543 13.6046 5 12.5 5Z" fill="#323544"/>  
                    <path d="M18 8.55859C16.8954 8.55859 16 9.45402 16 10.5586V16.2501C16 16.6643 16.3358 17.0001 16.75 17.0001H19.25C19.6642 17.0001 20 16.6643 20 16.2501V10.5586C20 9.45402 19.1046 8.55859 18 8.55859Z" fill="#323544"/>  
                </svg>  
            </div>  

            <div class="major-edit-icon" id="majorEdit" title="Select major subjects">  
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#323544" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-pencil-discount">  
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>  
                    <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />  
                    <path d="M13.5 6.5l4 4" />  
                    <path d="M16 21l5 -5" />  
                    <path d="M21 21v.01" />  
                    <path d="M16 16v.01" />  
                </svg>  
            </div>  

            <div class="card-body">  
                <div class="half-shell">  
                    <svg viewBox="0 0 140 80">  
                        <path class="half-outer-ring" d="M15 70 A55 55 0 0 1 125 70" />  
                        <path class="half-inner-value" id="majorHalfPath" d="M28 70 A40 40 0 0 1 112 70" />  
                    </svg>  
                    <div class="half-center-text" id="majorPercent">0%</div>  
                </div>  
                <div class="card-footer" id="majorFooter">Select major, click pencil button</div>  
            </div>  

            <div class="major-modal" id="majorModal">  
                <div class="major-modal-content">  
                    <div class="major-modal-subtitle">  
                        Select major subjects to calculate major overall.  
                    </div>  
                    <div class="major-modal-list" id="majorList">  
                        <label>  
                            <input type="checkbox" value="Mathematics" class="major-checkbox" />  
                            <span>Mathematics</span>  
                        </label>  
                        <label>  
                            <input type="checkbox" value="Physics" class="major-checkbox" />  
                            <span>Physics</span>  
                        </label>  
                        <label>  
                            <input type="checkbox" value="Chemistry" class="major-checkbox" />  
                            <span>Chemistry</span>  
                        </label>  
                        <label>  
                            <input type="checkbox" value="Computer Science" class="major-checkbox" />  
                            <span>Computer Science</span>  
                        </label>  
                    </div>  
                    <div class="major-modal-actions">  
                        <button type="button" class="btn-ghost" id="majorCancel">Cancel</button>  
                        <button type="button" class="btn-primary" id="majorSave">Save</button>  
                    </div>  
                </div>  
            </div>  
        </article>  

        <article class="card info-card span-full">  
            <div class="summary-header">  
                <span class="summary-title">Attendance summary</span>  
                <span class="summary-icon" aria-hidden="true">  
                  <svg viewBox="0 0 24 24" fill="none" stroke="#323544" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">  
                    <rect x="3" y="4" width="18" height="14" rx="2"></rect>  
                    <path d="M7 9h10"></path>  
                    <path d="M7 13h4"></path>  
                  </svg>  
                </span>  
            </div>  
            <div class="info-card-body" id="summaryBody">  
                <ul>  
                    <li>Overall attendance is 75% for this period.</li>  
                    <li>Major subjects are not selected yet. Choose majors to track their combined attendance.</li>  
                </ul>  
            </div>  
        </article>  

        <article class="card subject-card purple span-2">  
            <div class="subject-header">  
                <span class="subject-name">Mathematics</span>  
                <span class="subject-icon" aria-hidden="true">  
                  <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">  
                    <path stroke="#323544" stroke-linejoin="round" d="m17 13 3.4641-2V7L17 5l-3.4641 2v4M17 13l-3.4641-2M17 13v4l-7.00001 4M17 13V9m0 4-7.00001 4m3.53591-6L10.5 12.7348M9.99999 21l-3.4641-2.1318M9.99999 21v-4m-3.4641 2v-.1318m0 0V15L10.5 12.7348m-3.96411 6.1334L3.5 17V5m0 0L7 3l3.5 2m-7 0 2.99999 2M10.5 5v7.7348M10.5 5 6.49999 7M17 9l3.5-2M17 9l-3.5-2M9.99999 17l-3.5-2m0 .5V7"/>  
                  </svg>  
                </span>  
            </div>  
            <div class="subject-meta-group">  
                <div class="subject-meta">Total classes - 22</div>  
                <div class="subject-meta">Attended - 18</div>  
            </div>  
            <div class="subject-percentage">82%</div>  
        </article>  

        <article class="card subject-card subject-2 span-2">  
            <div class="subject-header">  
                <span class="subject-name">Physics</span>  
                <span class="subject-icon" aria-hidden="true">  
                  <svg class="w-[38px] h-[38px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#323544" viewBox="0 0 24 24">  
                    <path d="M20 14h-2.722L11 20.278a5.511 5.511 0 0 1-.9.722H20a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1ZM9 3H4a1 1 0 0 0-1 1v13.5a3.5 3.5 0 1 0 7 0V4a1 1 0 0 0-1-1ZM6.5 18.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM19.132 7.9 15.6 4.368a1 1 0 0 0-1.414 0L12 6.55v9.9l7.132-7.132a1 1 0 0 0 0-1.418Z"/>  
                  </svg>  
                </span>  
            </div>  
            <div class="subject-meta-group">  
                <div class="subject-meta">Total classes - 20</div>  
                <div class="subject-meta">Attended - 15</div>  
            </div>  
            <div class="subject-percentage">75%</div>  
        </article>  

        <article class="card subject-card mint span-2">  
            <div class="subject-header">  
                <span class="subject-name">Computer Science</span>  
                <span class="subject-icon" aria-hidden="true">  
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">  
                    <path d="M11.9933 3.50879C11.6316 3.50879 11.2683 3.58158 10.9266 3.7263L3.4825 6.85273C3.06333 7.02875 3.07417 7.62121 3.4925 7.79726L10.9775 10.8086C11.6332 11.0786 12.3667 11.0786 13.0225 10.8086L20.5075 7.79726C20.9266 7.63137 20.9266 7.02875 20.5175 6.85273L13.0533 3.7263C12.7179 3.58228 12.3575 3.5083 11.9933 3.50879ZM21.5 8.66308C21.4365 8.6635 21.3736 8.67644 21.315 8.70117L12.9716 11.9825C12.8783 12.0213 12.7984 12.0874 12.742 12.1723C12.6857 12.2573 12.6554 12.3574 12.655 12.4598V19.989C12.6558 20.0714 12.6763 20.1524 12.7148 20.225C12.7533 20.2975 12.8087 20.3595 12.876 20.4055C12.9433 20.4515 13.0207 20.4801 13.1014 20.4889C13.1821 20.4978 13.2637 20.4865 13.3392 20.4562L21.6833 17.1639C21.7769 17.1286 21.8574 17.0649 21.9141 16.9814C21.9708 16.898 22.0007 16.7989 22 16.6975V9.16836C21.9991 9.03426 21.946 8.90598 21.8523 8.81146C21.7587 8.71694 21.632 8.66305 21.5 8.66308ZM2.56333 8.69609C2.48934 8.69343 2.41561 8.70634 2.34678 8.73399C2.27794 8.76166 2.21548 8.80352 2.16333 8.85688C2.07167 8.95082 2 9.06425 2 9.19965V16.271C2 16.645 2.42916 16.8947 2.75667 16.728L10.7116 12.8441C11.1 12.6579 11.07 12.0756 10.6608 11.9198L2.73583 8.73246C2.68113 8.70923 2.62262 8.69746 2.56333 8.69609Z" fill="#323544"/>  
                  </svg>  
                </span>  
            </div>  
            <div class="subject-meta-group">  
                <div class="subject-meta">Total classes - 21</div>  
                <div class="subject-meta">Attended - 16</div>  
            </div>  
            <div class="subject-percentage">76%</div>  
        </article>  

        <article class="card subject-card peach span-2">  
            <div class="subject-header">  
                <span class="subject-name">Computer Science</span>  
                <span class="subject-icon" aria-hidden="true">  
                  <svg class="w-[38px] h-[38px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#323544" viewBox="0 0 24 24">  
                    <path d="M3 4.92857C3 3.90506 3.80497 3 4.88889 3H19.1111C20.195 3 21 3.90506 21 4.92857V13h-3v-2c0-.5523-.4477-1-1-1h-4c-.5523 0-1 .4477-1 1v2H3V4.92857ZM3 15v1.0714C3 17.0949 3.80497 18 4.88889 18h3.47608L7.2318 19.3598c-.35356.4243-.29624 1.0548.12804 1.4084.42428.3536 1.05484.2962 1.40841-.128L10.9684 18h2.0632l2.2002 2.6402c.3535.4242.9841.4816 1.4084.128.4242-.3536.4816-.9841.128-1.4084L15.635 18h3.4761C20.195 18 21 17.0949 21 16.0714V15H3Z"/>  
                    <path d="M16 12v1h-2v-1h2Z"/>  
                  </svg>  
                </span>  
            </div>  
            <div class="subject-meta-group">  
                <div class="subject-meta">Total classes - 14</div>  
                <div class="subject-meta">Attended - 11</div>  
            </div>  
            <div class="subject-percentage">79%</div>  
        </article>  

    </section>  
</section>

<section class="periodical-section" id="dateWiseRecordsSection">
    <header class="app-header">
        <div class="title-block">
            <h1>Date-wise Records</h1>
            <span class="subtitle" id="selectedDateLabel">Loadingâ€¦</span>
        </div>

        <div class="month-year-select">
            <span class="edit-icon" aria-hidden="true">
                <svg clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="m19 20.25c0-.402-.356-.75-.75-.75-2.561 0-11.939 0-14.5 0-.394 0-.75.348-.75.75s.356.75.75.75h14.5c.394 0 .75-.348.75-.75zm-7.403-3.398 9.124-9.125c.171-.171.279-.423.279-.684 0-.229-.083-.466-.28-.662l-3.115-3.104c-.185-.185-.429-.277-.672-.277s-.486.092-.672.277l-9.143 9.103c-.569 1.763-1.555 4.823-1.626 5.081-.02.075-.029.15-.029.224 0 .461.349.848.765.848.511 0 .991-.189 5.369-1.681zm-3.27-3.342 2.137 2.137-3.168 1.046zm.955-1.166 7.651-7.616 2.335 2.327-7.637 7.638z" />
                </svg>
            </span>
            <select id="monthYearSelect" aria-label="Month and year"></select>
        </div>
    </header>

    <section class="date-strip-wrapper" aria-label="Date picker">
        <div class="date-strip" id="dateStrip"></div>
    </section>

    <section class="cards-container" id="dateCardsContainer" aria-label="Attendance records"></section>
</section>

</div>  <div class="modal-backdrop hidden" id="editModal">
    <div class="modal">
        <h3>Edit record</h3>
        <div class="modal-subject" id="modalSubject"></div>

        <div class="form-group">
            <label for="modalStatus">Status</label>
            <select id="modalStatus">
                <option value="present">Present</option>
                <option value="absent">Absent</option>
                <option value="not-held">Class not held</option>
            </select>
        </div>

        <div class="form-group">
            <label for="modalRemarks">Remarks / Notes</label>
            <textarea id="modalRemarks" placeholder="Add your notes for this class"></textarea>
        </div>

        <div class="modal-actions">
            <button class="btn btn-secondary" id="modalCancel">Cancel</button>
            <button class="btn btn-primary" id="modalSave">Save changes</button>
        </div>
    </div>
</div>
<div class="ai-board-overlay">  
    <div class="ai-board" id="aiBoard">  
        <div class="ai-board-header">  
            <h2 class="ai-title">Attenza AI</h2>  
            <button class="ai-close-btn" id="aiCloseBtn" aria-label="Close AI">Ã—</button>  
        </div>  <div class="ai-board-body">  
        <div class="ai-user-card-wrapper">  
            <div class="ai-user-card" id="userMessageCard">  
                Your question will appear here.  
            </div>  
        </div>  

        <div class="ai-status-row">  
            <div class="ai-status-loader">  
                <div class="stripe"></div>  
                <div class="stripe"></div>  
                <div class="stripe"></div>  
                <div class="stripe"></div>  
            </div>  
            <span class="ai-status-text" id="aiStatusText">Analyzingâ€¦</span>  
        </div>  

        <div class="ai-response" id="aiResponse">

Here is a sample response from Attenza AI.

Once you connect Gemini and your attendance backend, this will show real, detailed insights.
</div>

<button class="ai-copy-btn" id="aiCopyBtn">  
            <span>ðŸ“‹</span>  
            <span>Copy</span>  
        </button>  
    </div>  
</div>

</div>  <div class="ai-card-container">  
    <div class="see-more-btn">  
        <div class="logo-loader-wrapper">  
            <div class="loader">  
                <svg width="100" height="100" viewBox="0 0 100 100">  
                    <defs>  
                        <mask id="clipping">  
                            <polygon points="0,0 100,0 100,100 0,100" fill="black"></polygon>  
                            <polygon points="25,25 75,25 50,75" fill="white"></polygon>  
                            <polygon points="50,25 75,75 25,75" fill="white"></polygon>  
                            <polygon points="35,35 65,35 50,65" fill="white"></polygon>  
                            <polygon points="35,35 65,35 50,65" fill="white"></polygon>  
                            <polygon points="35,35 65,35 50,65" fill="white"></polygon>  
                            <polygon points="35,35 65,35 50,65" fill="white"></polygon>  
                        </mask>  
                    </defs>  
                </svg>  
                <div class="box"></div>  
            </div>  
        </div>  <span class="divider"></span>  

    <div class="prompt-area" id="promptArea">  
        <div class="prompt-display">  
            <span class="typewriter-text" id="typewriterText"></span>  
            <input  
                type="text"  
                id="promptInput"  
                class="prompt-input"  
                autocomplete="off"  
                autocorrect="off"  
                autocapitalize="sentences"  
                spellcheck="false"  
            />  
        </div>  

        <button class="send-btn" id="sendBtn">  
            <svg viewBox="0 0 24 24" style="width:22px; height:22px;">  
                <path d="M12 5L18 11" stroke="white" stroke-width="2.4" stroke-linecap="round"/>  
                <path d="M12 5L6 11" stroke="white" stroke-width="2.4" stroke-linecap="round"/>  
                <path d="M12 5V19" stroke="white" stroke-width="2.4" stroke-linecap="round"/>  
            </svg>  
        </button>  
    </div>  
</div>

</div>  <script>  
    // Header expand/collapse  
    const expandArrow = document.getElementById('expandArrow');  
    const expandedContent = document.getElementById('expandedContent');  
    const header = document.getElementById('header');  
  
    expandArrow.addEventListener('click', function() {  
        expandedContent.classList.toggle('show');  
        expandArrow.classList.toggle('rotated');  
        header.classList.toggle('expanded');  
    });  
  
    // Attendance ring  
    function updateRing(percentage) {  
        const circle = document.getElementById('progressCircle');  
        const radius = 70;  
        const circumference = 2 * Math.PI * radius;  
        const offset = circumference - (percentage / 100) * circumference;  
  
        circle.style.strokeDasharray = `${circumference} ${circumference}`;  
        circle.style.strokeDashoffset = offset;  
    }  
  
    // Dynamic quote  
    function updateQuote(percentage) {  
        const quoteElement = document.querySelector('.welcome-text-content p');  
        if (percentage >= 85) {  
            quoteElement.textContent = "Excellent! You're a role model for attendance.";  
        } else if (percentage >= 75) {  
            quoteElement.textContent = "Great progress! Keep maintaining your attendance streak.";  
        } else if (percentage >= 65) {  
            quoteElement.textContent = "Good effort! A few more classes to reach the goal.";  
        } else {  
            quoteElement.textContent = "Time to catch up! Every class counts.";  
        }  
    }  
  
    // Smooth text change (kept for future use)  
    function changeWelcomeText(title, subtitle) {  
        const titleEl = document.getElementById('welcomeTitle');  
        const subtitleEl = document.getElementById('welcomeSubtitle');  
  
        titleEl.classList.add('fade-text');  
        subtitleEl.classList.add('fade-text');  
  
        setTimeout(() => {  
            titleEl.textContent = title;  
            subtitleEl.textContent = subtitle;  
  
            titleEl.classList.remove('fade-text');  
            subtitleEl.classList.remove('fade-text');  
        }, 350);  
    }  
  
    // Carousel drag scroll  
    const carousel = document.getElementById('carousel');  
    let isDown = false;  
    let startX;  
    let scrollLeft;  
  
    carousel.addEventListener('mousedown', (e) => {  
        isDown = true;  
        carousel.style.cursor = 'grabbing';  
        startX = e.pageX - carousel.offsetLeft;  
        scrollLeft = carousel.scrollLeft;  
    });  
  
    carousel.addEventListener('mouseleave', () => {  
        isDown = false;  
        carousel.style.cursor = 'grab';  
    });  
  
    carousel.addEventListener('mouseup', () => {  
        isDown = false;  
        carousel.style.cursor = 'grab';  
    });  
  
    carousel.addEventListener('mousemove', (e) => {  
        if (!isDown) return;  
        e.preventDefault();  
        const x = e.pageX - carousel.offsetLeft;  
        const walk = (x - startX) * 2;  
        carousel.scrollLeft = scrollLeft - walk;  
    });  
  
    // Attendance buttons  
    document.querySelectorAll('.attendance-btn').forEach(btn => {  
        btn.addEventListener('click', function() {  
            const card = this.closest('.class-card');  
            const subject = card.querySelector('.class-subject').textContent;  
            const action = this.textContent;  
  
            this.style.transform = 'scale(0.95)';  
            setTimeout(() => {  
                this.style.transform = '';  
            }, 100);  
  
            console.log(`${action} for ${subject}`);  
        });  
    });  
  
    // Initialize ring + quote  
    updateRing(75);  
    updateQuote(75);  
    carousel.style.cursor = 'grab';  
  
    // PWA Install  
    let deferredPrompt;  
    const installStrip = document.getElementById('installStrip');  
    const installText = document.getElementById('installText');  
    const closeStripBtn = document.getElementById('closeStrip');  
  
    if (localStorage.getItem('installStripDismissed') === 'true') {  
        installStrip.classList.add('hidden');  
    }  
  
    window.addEventListener('beforeinstallprompt', (e) => {  
        console.log('beforeinstallprompt event fired');  
        e.preventDefault();  
        deferredPrompt = e;  
        installStrip.classList.remove('hidden');  
    });  
  
    installText.addEventListener('click', async function() {  
        console.log('Install text clicked');  
        if (!deferredPrompt) {  
            console.log('No deferred prompt available');  
            alert('App install is not available. Try using Chrome or Edge browser.');  
            return;  
        }  
  
        try {  
            deferredPrompt.prompt();  
            const choiceResult = await deferredPrompt.userChoice;  
            console.log('User choice:', choiceResult.outcome);  
  
            if (choiceResult.outcome === 'accepted') {  
                console.log('User accepted the install prompt');  
                installText.textContent = 'Installing...';  
                setTimeout(() => {  
                    installStrip.classList.add('hidden');  
                }, 1500);  
            } else {  
                console.log('User dismissed the install prompt');  
            }  
  
            deferredPrompt = null;  
        } catch (err) {  
            console.error('Error during install prompt:', err);  
        }  
    });  
  
    closeStripBtn.addEventListener('click', function(e) {  
        e.stopPropagation();  
        installStrip.classList.add('hidden');  
        localStorage.setItem('installStripDismissed', 'true');  
        console.log('Install strip dismissed');  
    });  
  
    if ('serviceWorker' in navigator) {  
        window.addEventListener('load', () => {  
            navigator.serviceWorker.register('./sw.js')  
                .then(registration => {  
                    console.log('Service Worker registered successfully:', registration.scope);  
                })  
                .catch(err => {  
                    console.log('Service Worker registration failed:', err);  
                });  
        });  
    }  
  
    window.addEventListener('appinstalled', () => {  
        console.log('PWA was installed successfully');  
        installStrip.classList.add('hidden');  
        localStorage.setItem('installStripDismissed', 'true');  
    });  
</script>  <script>  
    /* AI BOARD JS */  
    const aiBoard = document.getElementById("aiBoard");  
    const aiCloseBtn = document.getElementById("aiCloseBtn");  
    const aiCopyBtn = document.getElementById("aiCopyBtn");  
    const aiStatusText = document.getElementById("aiStatusText");  
    const aiResponse = document.getElementById("aiResponse");  
    const userMessageCard = document.getElementById("userMessageCard");  
  
    function openBoardWithPrompt(text) {  
        userMessageCard.textContent = text || "Your question will appear here.";  
        aiBoard.classList.add("visible");  
    }  
  
    aiCloseBtn.addEventListener("click", () => {  
        aiBoard.classList.remove("visible");  
    });  
  
    aiCopyBtn.addEventListener("click", () => {  
        const text = aiResponse.textContent.trim();  
        if (!text) return;  
        navigator.clipboard.writeText(text).then(() => {  
            const labelSpan = aiCopyBtn.querySelector("span:last-child");  
            const prev = labelSpan.textContent;  
            labelSpan.textContent = "Copied!";  
            setTimeout(() => (labelSpan.textContent = prev), 1500);  
        });  
    });  
  
    const statuses = ["Analyzingâ€¦", "Thinkingâ€¦", "Almost thereâ€¦", "Preparing answerâ€¦"];  
    let statusIndex = 0;  
    setInterval(() => {  
        statusIndex = (statusIndex + 1) % statuses.length;  
        aiStatusText.textContent = statuses[statusIndex];  
    }, 2000);  
  
    /* AI CARD JS (typewriter + input) */  
    const phrases = ["Ask attenza ai your doubts", "Can i bunk eng class ?"];  
    const typewriterEl = document.getElementById("typewriterText");  
    const promptArea = document.getElementById("promptArea");  
    const promptInput = document.getElementById("promptInput");  
    const sendBtn = document.getElementById("sendBtn");  
  
    let currentPhraseIndex = 0;  
    let currentCharIndex = 0;  
    let isDeleting = false;  
    let typingActive = true;  
    let typingTimeout;  
  
    function typeLoop() {  
        if (!typingActive) return;  
  
        const currentPhrase = phrases[currentPhraseIndex];  
        if (!isDeleting) {  
            typewriterEl.textContent = currentPhrase.slice(0, currentCharIndex + 1);  
            currentCharIndex++;  
  
            if (currentCharIndex === currentPhrase.length) {  
                typingTimeout = setTimeout(() => {  
                    isDeleting = true;  
                    typeLoop();  
                }, 1200);  
                return;  
            }  
  
            typingTimeout = setTimeout(typeLoop, 120);  
        } else {  
            typewriterEl.textContent = currentPhrase.slice(0, currentCharIndex - 1);  
            currentCharIndex--;  
  
            if (currentCharIndex === 0) {  
                isDeleting = false;  
                currentPhraseIndex = (currentPhraseIndex + 1) % phrases.length;  
                typingTimeout = setTimeout(typeLoop, 300);  
                return;  
            }  
  
            typingTimeout = setTimeout(typeLoop, 80);  
        }  
    }  
  
    function stopTypewriter() {  
        typingActive = false;  
        if (typingTimeout) clearTimeout(typingTimeout);  
        typewriterEl.style.display = "none";  
        promptInput.style.display = "block";  
    }  
  
    // Start typewriter  
    typeLoop();  
  
    // Switch to input on tap  
    promptArea.addEventListener("click", () => {  
        if (typingActive) {  
            stopTypewriter();  
        }  
        promptInput.focus();  
    });  
  
    // Show send button when text present  
    promptInput.addEventListener("input", () => {  
        if (promptInput.value.trim().length > 0) {  
            sendBtn.classList.add("visible");  
        } else {  
            sendBtn.classList.remove("visible");  
        }  
    });  
  
    // Send -> open AI board  
    sendBtn.addEventListener("click", () => {  
        const value = promptInput.value.trim();  
        if (!value) return;  
        console.log("User asked:", value);  
  
        openBoardWithPrompt(value);  
  
        promptInput.value = "";  
        sendBtn.classList.remove("visible");  
    });  
</script>  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>  <script>  
    const startDateEl = document.getElementById("startDate");  
    const endDateEl = document.getElementById("endDate");  
  
    function updateDisplay(instance) {  
        const dates = instance.selectedDates;  
        const format = d => instance.formatDate(d, "d M Y");  
  
        if (dates.length === 0) {  
            startDateEl.textContent = "Select date";  
            startDateEl.classList.add("empty");  
            endDateEl.textContent = "Select date";  
            endDateEl.classList.add("empty");  
        } else if (dates.length === 1) {  
            startDateEl.textContent = format(dates[0]);  
            startDateEl.classList.remove("empty");  
            endDateEl.textContent = "Select date";  
            endDateEl.classList.add("empty");  
        } else {  
            startDateEl.textContent = format(dates[0]);  
            startDateEl.classList.remove("empty");  
            endDateEl.textContent = format(dates[1]);  
            endDateEl.classList.remove("empty");  
        }  
    }  
  
    flatpickr("#rangePicker", {  
        mode: "range",  
        dateFormat: "Y-m-d",  
        defaultDate: [  
            "2019-10-21",  
            "2019-11-06"  
        ],  
        onReady: function(selectedDates, dateStr, instance) {  
            updateDisplay(instance);  
        },  
        onChange: function(selectedDates, dateStr, instance) {  
            updateDisplay(instance);  
        },  
        onOpen: function() {  
            document.querySelector(".calendar-icon").style.color = "#4b5563";  
        },  
        onClose: function() {  
            document.querySelector(".calendar-icon").style.color = "#9ca3af";  
        }  
    });  
  
    /* --- JS for dynamic font scaling --- */  
  
    function getLineCount(element) {  
        const cs = window.getComputedStyle(element);  
        const lineHeight = parseFloat(cs.lineHeight) || 1.2 * parseFloat(cs.fontSize);  
        return element.scrollHeight / lineHeight;  
    }  
  
    function adjustSubjectFont(subjectNameEl) {  
        const MAX_LINES = 2.1;  
  
        subjectNameEl.style.fontSize = '14px';  
        let currentSize = 14;  
  
        while (getLineCount(subjectNameEl) > MAX_LINES && currentSize > 10) {  
            currentSize -= 0.5;  
            subjectNameEl.style.fontSize = currentSize + 'px';  
            if (currentSize <= 10.5) break;  
        }  
    }  
  
    /* Major subjects selection & calculation */  
    const subjectsData = {  
        "Mathematics of division": { attended: 18, total: 22 },  
        "Physics": { attended: 15, total: 20 },  
        "fundamental of financial investment": { attended: 16, total: 21 },  
        "Computer Science": { attended: 11, total: 14 }  
    };  
  
    let majorSubjects = []; // selected majors  
  
    const majorModal = document.getElementById("majorModal");  
    const majorEdit = document.getElementById("majorEdit");  
    const majorSave = document.getElementById("majorSave");  
    const majorCancel = document.getElementById("majorCancel");  
    const majorCheckboxes = document.querySelectorAll(".major-checkbox");  
    const majorPercentEl = document.getElementById("majorPercent");  
    const majorFooterEl = document.getElementById("majorFooter");  
    const majorHalfPath = document.getElementById("majorHalfPath");  
    const summaryBodyEl = document.getElementById("summaryBody");  
  
    function openMajorModal() {  
        majorCheckboxes.forEach(cb => {  
            cb.checked = majorSubjects.includes(cb.value);  
        });  
        majorModal.style.display = "block";  
    }  
  
    function closeMajorModal() {  
        majorModal.style.display = "none";  
    }  
  
    function updateAttendanceSummary(overallPercent, majorPercent, majorsCount) {  
        const lines = [];  
        lines.push(`Overall attendance is ${overallPercent}% for this period.`);  
  
        if (majorsCount === 0) {  
            lines.push("Major subjects are not selected yet. Choose majors to track their combined attendance.");  
        } else if (majorPercent < 75) {  
            lines.push(`Major subjects are at ${majorPercent}%, which is below the 75% safety threshold.`);  
        } else {  
            lines.push(`Major subjects are at ${majorPercent}%, which is above the 75% safety threshold.`);  
        }  
  
        summaryBodyEl.innerHTML = "<ul>" + lines.map(l => `<li>${l}</li>`).join("") + "</ul>";  
    }  
  
    function updateMajorCard() {  
        const overallPercent = 75;  
  
        if (majorSubjects.length === 0) {  
            majorPercentEl.textContent = "0%";  
            majorFooterEl.textContent = "Select major, click pencil button";  
            majorHalfPath.style.strokeDashoffset = 100;  
            updateAttendanceSummary(overallPercent, 0, 0);  
            return;  
        }  
  
        let totalAttended = 0;  
        let totalClasses = 0;  
  
        majorSubjects.forEach(name => {  
            const data = subjectsData[name];  
            if (data) {  
                totalAttended += data.attended;  
                totalClasses += data.total;  
            }  
        });  
  
        const percent = totalClasses > 0 ? Math.round((totalAttended / totalClasses) * 100) : 0;  
        majorPercentEl.textContent = percent + "%";  
        majorFooterEl.textContent = majorSubjects.length + " subjects combined";  
  
        const offset = 100 - Math.max(0, Math.min(100, percent));  
        majorHalfPath.style.strokeDashoffset = offset;  
  
        updateAttendanceSummary(overallPercent, percent, majorSubjects.length);  
    }  
  
    majorEdit.addEventListener("click", openMajorModal);  
    majorCancel.addEventListener("click", closeMajorModal);  
  
    majorSave.addEventListener("click", () => {  
        const selected = [];  
        majorCheckboxes.forEach(cb => {  
            if (cb.checked) selected.push(cb.value);  
        });  
        majorSubjects = selected;  
        updateMajorCard();  
        closeMajorModal();  
    });  
  
    updateAttendanceSummary(75, 0, 0);  
    updateMajorCard();  
  
    // Run the dynamic font adjustment when the page loads  
    document.querySelectorAll('.card.subject-card .subject-name').forEach(adjustSubjectFont);  
  
    // Optional: Re-run oindow resize if the layout changes significantly  
    window.addEventListener('resize', () => {  
        document.querySelectorAll('.card.subject-card .subject-name').forEach(adjustSubjectFont);  
    });  
</script>
<script>
    /* ---------------- DATE-WISE RECORDS JS (NEW) ---------------- */
    const attendanceData = {
      "2026-01-02": [
        {
          subject: "Data Structures",
          time: "09:00 â€“ 10:00",
          room: "C-204",
          faculty: "Prof. Mehta",
          remarks: "Intro to trees. Bring previous assignment.",
          status: "present"
        },
        {
          subject: "Engineering Mathematics",
          time: "11:00 â€“ 12:00",
          room: "A-103",
          faculty: "Dr. Rao",
          remarks: "Missed quiz, check makeup options.",
          status: "absent"
        },
        {
          subject: "Computer Networks",
          time: "13:00 â€“ 14:00",
          room: "Lab-2",
          faculty: "Mr. Sharma",
          remarks: "Configured basic routing tables.",
          status: "present"
        },
        {
          subject: "Discrete Mathematics",
          time: "15:00 â€“ 16:00",
          room: "B-210",
          faculty: "Dr. Iyer",
          remarks: "Revision of combinatorics; test next week.",
          status: "present"
        }
      ],
      "2026-01-03": [
        {
          subject: "Operating Systems",
          time: "10:00 â€“ 11:00",
          room: "Lab-1",
          faculty: "Ms. Kulkarni",
          remarks: "Lab cancelled due to network issue.",
          status: "not-held"
        }
      ]
    };

    const monthYearSelect = document.getElementById("monthYearSelect");
    const dateStrip = document.getElementById("dateStrip");
    const cardsContainer = document.getElementById("dateCardsContainer"); // Renamed ID
    const selectedDateLabel = document.getElementById("selectedDateLabel");

    const editModal = document.getElementById("editModal");
    const modalSubject = document.getElementById("modalSubject");
    const modalStatus = document.getElementById("modalStatus");
    const modalRemarks = document.getElementById("modalRemarks");
    const modalCancel = document.getElementById("modalCancel");
    const modalSave = document.getElementById("modalSave");

    const monthNames = [
      "Jan", "Feb", "Mar", "Apr", "May", "Jun",
      "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
    ];

    let currentYear = 2026;
    let currentMonth = 0;
    let selectedDateKey = null;
    let editContext = null;

    function initSelectors() {
      const startYear = 2024;
      const endYear = 2030;

      for (let y = startYear; y <= endYear; y++) {
        for (let m = 0; m < 12; m++) {
          const opt = document.createElement("option");
          const monthLabel = monthNames[m];
          const valueMonth = String(m + 1).padStart(2, "0");
          opt.value = `${y}-${valueMonth}`;
          opt.textContent = `${monthLabel} ${y}`;
          monthYearSelect.appendChild(opt);
        }
      }

      const defaultMonth = String(currentMonth + 1).padStart(2, "0");
      monthYearSelect.value = `${currentYear}-${defaultMonth}`;

      monthYearSelect.addEventListener("change", () => {
        const [year, month] = monthYearSelect.value.split("-").map(Number);
        currentYear = year;
        currentMonth = month - 1;
        renderMonth();
      });
    }

    function getDaysInMonth(year, monthIndex) {
      return new Date(year, monthIndex + 1, 0).getDate();
    }

    function formatDateKey(year, monthIndex, day) {
      const m = String(monthIndex + 1).padStart(2, "0");
      const d = String(day).padStart(2, "0");
      return `${year}-${m}-${d}`;
    }

    function formatReadableDate(year, monthIndex, day) {
      const date = new Date(year, monthIndex, day);
      const weekday = date.toLocaleDateString(undefined, { weekday: "short" });
      const full = date.toLocaleDateString(undefined, { day: "numeric", month: "long", year: "numeric" });
      return `${weekday}, ${full}`;
    }

    function getStartTimeLabel(timeStr) {
      if (!timeStr) return "";
      let part = timeStr.split("â€“")[0].split("-")[0].trim();
      part = part.replace(":", ".");
      return part;
    }

    function renderMonth() {
      dateStrip.innerHTML = "";
      const days = getDaysInMonth(currentYear, currentMonth);

      for (let d = 1; d <= days; d++) {
        const date = new Date(currentYear, currentMonth, d);
        const weekday = date.toLocaleDateString(undefined, { weekday: "short" });
        const dateKey = formatDateKey(currentYear, currentMonth, d);

        const btn = document.createElement("button");
        btn.className = "date-item";
        btn.dataset.dateKey = dateKey;

        const dayNameSpan = document.createElement("span");
        dayNameSpan.className = "day-name";
        dayNameSpan.textContent = weekday;

        const dayNumberSpan = document.createElement("span");
        dayNumberSpan.className = "day-number";
        dayNumberSpan.textContent = String(d).padStart(2, "0");

        btn.appendChild(dayNameSpan);
        btn.appendChild(dayNumberSpan);

        btn.addEventListener("click", () => {
          selectDate(dateKey, d);
          ensureVisible(btn);
        });

        dateStrip.appendChild(btn);
      }

      let defaultDay = 1;
      if (selectedDateKey) {
        const [yr, m, d] = selectedDateKey.split("-").map(Number);
        if (yr === currentYear && m === currentMonth + 1) {
          defaultDay = d;
        }
      }

      const defaultKey = formatDateKey(currentYear, currentMonth, defaultDay);
      const defaultButton = [...dateStrip.children].find(el => el.dataset.dateKey === defaultKey);
      if (defaultButton) {
        selectDate(defaultKey, defaultDay);
        ensureVisible(defaultButton);
      }
    }

    function selectDate(dateKey, dayNumber) {
      selectedDateKey = dateKey;

      [...dateStrip.children].forEach(el =>
        el.classList.toggle("selected", el.dataset.dateKey === dateKey)
      );

      const [year, month, day] = dateKey.split("-").map(Number);
      selectedDateLabel.textContent = formatReadableDate(year, month - 1, dayNumber || day);

      renderCards(dateKey);
    }

    function renderCards(dateKey) {
      cardsContainer.innerHTML = "";

      const records = attendanceData[dateKey] || [];

      if (!records.length) {
        const empty = document.createElement("div");
        empty.className = "empty-state";
        empty.textContent =
          "No records saved for this date. Once you add classes, they will appear here with your notes and status.";
        cardsContainer.appendChild(empty);
        return;
      }

      records.forEach((rec, index) => {
        const card = document.createElement("article");
        card.className = "record-card";

        const header = document.createElement("div");
        header.className = "card-header";

        const left = document.createElement("div");
        left.className = "card-header-left";

        const subject = document.createElement("div");
        subject.className = "subject-name";
        subject.textContent = rec.subject;
        left.appendChild(subject);

        const meta = document.createElement("div");
        meta.className = "meta-line";

        const startTimeLabel = getStartTimeLabel(rec.time);

        // Time
        const timeRow = document.createElement("div");
        timeRow.className = "meta-item";
        timeRow.innerHTML = `
          <span class="meta-icon" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" />
              <path d="M12 7v5l3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
          <span class="meta-text">${startTimeLabel}</span>
        `;
        meta.appendChild(timeRow);

        // Room
        const roomRow = document.createElement("div");
        roomRow.className = "meta-item";
        roomRow.innerHTML = `
          <span class="meta-icon" aria-hidden="true">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width="2" d="M20 14H4m6.5 3L8 20m5.5-3 2.5 3M4.88889 17H19.1111c.4909 0 .8889-.4157.8889-.9286V4.92857C20 4.41574 19.602 4 19.1111 4H4.88889C4.39797 4 4 4.41574 4 4.92857V16.0714c0 .5129.39797.9286.88889.9286ZM13 14v-3h4v3h-3Z"/>
            </svg>
          </span>
          <span class="meta-text">${rec.room}</span>
        `;
        meta.appendChild(roomRow);

        // Faculty
        const facultyRow = document.createElement("div");
        facultyRow.className = "meta-item faculty";
        facultyRow.innerHTML = `
          <span class="meta-icon" aria-hidden="true">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width="2" d="M14.7141 15h4.268c.4043 0 .732-.3838.732-.8571V3.85714c0-.47338-.3277-.85714-.732-.85714H6.71411c-.55228 0-1 .44772-1 1v4m10.99999 7v-3h3v3h-3Zm-3 6H6.71411c-.55228 0-1-.4477-1-1 0-1.6569 1.34315-3 3-3h2.99999c1.6569 0 3 1.3431 3 3 0 .5523-.4477 1-1 1Zm-1-9.5c0 1.3807-1.1193 2.5-2.5 2.5s-2.49999-1.1193-2.49999-2.5S8.8334 9 10.2141 9s2.5 1.1193 2.5 2.5Z"/>
            </svg>
          </span>
          <span class="meta-text">${rec.faculty}</span>
        `;
        meta.appendChild(facultyRow);

        left.appendChild(meta);
        header.appendChild(left);

        // Status pill
        const statusPill = document.createElement("span");
        statusPill.classList.add("status-pill");

        const statusDot = document.createElement("span");
        statusDot.className = "status-dot";
        statusPill.appendChild(statusDot);

        const statusText = document.createElement("span");
        if (rec.status === "present") {
          statusPill.classList.add("status-present");
          statusText.textContent = "Present";
        } else if (rec.status === "absent") {
          statusPill.classList.add("status-absent");
          statusText.textContent = "Absent";
        } else {
          statusPill.classList.add("status-notheld");
          statusText.textContent = "not held";
        }
        statusPill.appendChild(statusText);

        header.appendChild(statusPill);
        card.appendChild(header);

        const remarksWrapper = document.createElement("div");
        const remarksLabel = document.createElement("div");
        remarksLabel.className = "remarks-label";
        remarksLabel.textContent = "Remarks";
        const remarksBody = document.createElement("div");
        remarksBody.className = "remarks";
        remarksBody.textContent = rec.remarks || "No notes yet.";
        remarksWrapper.appendChild(remarksLabel);
        remarksWrapper.appendChild(remarksBody);

        card.appendChild(remarksWrapper);

        const footer = document.createElement("div");
        footer.className = "card-footer";

        const editBtn = document.createElement("button");
        editBtn.className = "edit-card-btn";
        editBtn.title = "Edit record";
        editBtn.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
               class="icon icon-tabler icon-tabler-pencil-discount">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
            <path d="M13.5 6.5l4 4" />
            <path d="M16 21l5 -5" />
            <path d="M21 21v.01" />
            <path d="M16 16v.01" />
          </svg>
          <span class="edit-card-btn-label">Edit records</span>
        `;
        editBtn.addEventListener("click", () => openEditModal(dateKey, index));

        footer.appendChild(editBtn);
        card.appendChild(footer);

        cardsContainer.appendChild(card);
      });
    }

    function ensureVisible(element) {
      const parent = dateStrip;
      const parentRect = parent.getBoundingClientRect();
      const elRect = element.getBoundingClientRect();

      if (elRect.left < parentRect.left) {
        parent.scrollLeft -= (parentRect.left - elRect.left) + 10;
      } else if (elRect.right > parentRect.right) {
        parent.scrollLeft += (elRect.right - parentRect.right) + 10;
      }
    }

    function openEditModal(dateKey, index) {
      const rec = (attendanceData[dateKey] || [])[index];
      if (!rec) return;

      editContext = { dateKey, index };

      const startTimeLabel = getStartTimeLabel(rec.time);
      modalSubject.textContent = `${rec.subject} Â· ${startTimeLabel} Â· ${rec.room}`;
      modalStatus.value = rec.status;
      modalRemarks.value = rec.remarks || "";

      editModal.classList.remove("hidden");
    }

    function closeEditModal() {
      editContext = null;
      editModal.classList.add("hidden");
    }

    modalCancel.addEventListener("click", closeEditModal);

    modalSave.addEventListener("click", () => {
      if (!editContext) return;
      const { dateKey, index } = editContext;
      const list = attendanceData[dateKey];
      if (!list || !list[index]) return;

      list[index].status = modalStatus.value;
      list[index].remarks = modalRemarks.value.trim();

      closeEditModal();
      renderCards(dateKey);
    });

    editModal.addEventListener("click", (e) => {
      if (e.target === editModal) {
        closeEditModal();
      }
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && !editModal.classList.contains("hidden")) {
        closeEditModal();
      }
    });

    initSelectors();
    renderMonth();
  </script>
</body>  
</html>
